exports.id=537,exports.ids=[537],exports.modules={2213:e=>{function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=2213,e.exports=webpackEmptyContext},8359:()=>{},3739:()=>{},307:(e,t,r)=>{Promise.resolve().then(r.bind(r,3002))},895:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3724,23)),Promise.resolve().then(r.t.bind(r,5365,23)),Promise.resolve().then(r.t.bind(r,4900,23)),Promise.resolve().then(r.t.bind(r,4714,23)),Promise.resolve().then(r.t.bind(r,5392,23)),Promise.resolve().then(r.t.bind(r,8898,23))},3002:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>AuthProvider,useAuth:()=>useAuth});var a=r(784),s=r(9885),i=r(6315),n=r(3334);(0,i.createClient)("https://placeholder.supabase.co","placeholder-key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});let createSupabaseClient=()=>(0,n.createClientComponentClient)();function convertDbUserProfile(e){return{id:e.id,first_name:e.first_name||void 0,last_name:e.last_name||void 0,phone:e.phone||void 0,role:e.role||"guest",avatar_url:e.avatar_url||void 0,preferences:e.preferences||{},created_at:e.created_at,updated_at:e.updated_at}}let AuthService=class AuthService{async signUp(e){let{email:t,password:r,firstName:a,lastName:s,phone:i,role:n="guest"}=e,{data:o,error:l}=await this.supabase.auth.signUp({email:t,password:r,options:{data:{first_name:a,last_name:s,phone:i,role:n}}});if(l)throw Error(l.message);return o}async signIn(e){let{email:t,password:r}=e,{data:a,error:s}=await this.supabase.auth.signInWithPassword({email:t,password:r});if(s)throw Error(s.message);return a}async signInWithProvider(e){let{data:t,error:r}=await this.supabase.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`}});if(r)throw Error(r.message);return t}async signOut(){let{error:e}=await this.supabase.auth.signOut();if(e)throw Error(e.message)}async getCurrentUser(){let{data:{user:e},error:t}=await this.supabase.auth.getUser();if(t||!e)return null;let{data:r}=await this.supabase.from("user_profiles").select("*").eq("id",e.id).single();return{id:e.id,email:e.email,profile:r?convertDbUserProfile(r):void 0}}async updateProfile(e,t){let{data:r,error:a}=await this.supabase.from("user_profiles").update(t).eq("id",e).select().single();if(a)throw Error(a.message);return r?convertDbUserProfile(r):null}async resetPassword(e){let{error:t}=await this.supabase.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`});if(t)throw Error(t.message)}async updatePassword(e){let{error:t}=await this.supabase.auth.updateUser({password:e});if(t)throw Error(t.message)}onAuthStateChange(e){return this.supabase.auth.onAuthStateChange(async(t,r)=>{if(r?.user){let t=await this.getCurrentUser();e(t)}else e(null)})}constructor(){this.supabase=createSupabaseClient()}};let o=new AuthService,l=(0,s.createContext)(void 0);function AuthProvider({children:e}){let[t,r]=(0,s.useState)(null),[i,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o.getCurrentUser().then(r).finally(()=>n(!1));let{data:{subscription:e}}=o.onAuthStateChange(e=>{r(e),n(!1)});return()=>e.unsubscribe()},[]);let signIn=async(e,t)=>{n(!0);try{await o.signIn({email:e,password:t});let a=await o.getCurrentUser();r(a)}catch(e){throw e}finally{n(!1)}},signUp=async e=>{n(!0);try{await o.signUp(e)}catch(e){throw e}finally{n(!1)}},signInWithProvider=async e=>{n(!0);try{await o.signInWithProvider(e)}catch(e){throw e}finally{n(!1)}},signOut=async()=>{n(!0);try{await o.signOut(),r(null)}catch(e){throw e}finally{n(!1)}},updateProfile=async e=>{if(!t)throw Error("No user logged in");try{let a=await o.updateProfile(t.id,e);a&&r({...t,profile:a})}catch(e){throw e}},resetPassword=async e=>{await o.resetPassword(e)};return a.jsx(l.Provider,{value:{user:t,loading:i,signIn,signUp,signInWithProvider,signOut,updateProfile,resetPassword},children:e})}function useAuth(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>RootLayout,metadata:()=>d});var a=r(4656),s=r(1326),i=r.n(s);r(7272);var n=r(5153);let o=(0,n.createProxy)(String.raw`/Users/emmanuelbukenya/Projects/Medical Rentals/medical-rentals/lib/hooks/useAuth.tsx`),{__esModule:l,$$typeof:u}=o;o.default;let h=(0,n.createProxy)(String.raw`/Users/emmanuelbukenya/Projects/Medical Rentals/medical-rentals/lib/hooks/useAuth.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/emmanuelbukenya/Projects/Medical Rentals/medical-rentals/lib/hooks/useAuth.tsx#useAuth`);let d={title:"Medical Rental Property Platform",description:"Comprehensive platform for managing short-term rental properties near medical facilities"};function RootLayout({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:i().className,children:a.jsx(h,{children:e})})})}},7272:()=>{}};